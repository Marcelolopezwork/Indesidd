function valid(){var e=$("#perfilfoto")[0].files[0].size;if(parseInt(e/824e3)>$("#perfilfoto").attr("size"))return Swal.fire("Aviso","Imagen muy grande. Utilice una imagen de 4MB de peso como máximo.","error"),!1}function muestra(e,a){$(e).toggleClass("icon-line-eye-off");e=$(e).hasClass("icon-line-eye-off")?"text":"password";$(a).attr("type",e)}function readURL(e){var a;e.files&&e.files[0]&&((a=new FileReader).onload=function(e){$("#profile").attr("src",e.target.result)},a.readAsDataURL(e.files[0]))}function ajaxData(e,n,o,i){$(e).on("click",function(e){var a=$(this).attr("href"),t=$(this).attr(o),r="#"+i;$.ajax({url:n,type:"POST",data:{z:a,t:t}}).done(function(e){$(r).html(e)}).fail(function(e,a){$(r).html("Ha ocurrido un error!!!")}),e.preventDefault()})}$("#phone").numerico(),$("#perfilfoto").on("change",function(){readURL(this),$("#archivo").text($(this).get(0).files.item(0).name)}),$(function(){$("form[name='actualizardata']").validate({rules:{level:{required:!0},phone:{required:!0,minlength:6}},messages:{level:{required:"Ingrese nivel de estudios"},phone:{required:"Ingresa tu número de teléfono",minlength:"Mínimo 6 caracteres"}},errorPlacement:function(e,a){"level"==a.attr("name")&&e.appendTo("#levelError"),"phone"==a.attr("name")&&e.appendTo("#phoneError")},submitHandler:function(e){$.ajax({type:"post",url:"update.php",data:$(e).serialize(),success:function(e){e=JSON.parse(e);1==e[0]?Toast.fire({icon:"info",title:"Datos actualizados"}):Toast.fire({icon:"error",title:e[1]})},error:function(){Toast.fire({icon:"error",title:"No se pudo actualizar la información"})}})}}),$.validator.addMethod("passeguro",function(e,a){return this.optional(a)||/^[a-zA-Z0-9!@#$%^&()={*};:\_\|,.<>+-]*$/i.test(e)&&/[A-Z]/.test(e)&&/[a-z]/.test(e)&&/\d/i.test(e)&&/[!@#$%^&()={*};:\_\|,.<>+-]/i.test(e)},"No es segura"),$("#actualizarclave").on("blur keyup change","#again",function(){$("#actualizarclave").valid()?($("#subbtn").addClass("curor-not-allowed"),$("#subbtn").removeClass("curor-pointer"),$("#subbtn").prop("disabled",!1)):($("#subbtn").addClass("curor-pointer"),$("#subbtn").removeClass("curor-not-allowed"),$("#subbtn").prop("disabled",!0))}),$("#actualizarclave").validate({rules:{old:{required:!0,minlength:5,maxlength:12},new:{required:!0,minlength:8,maxlength:12,passeguro:!0},again:{required:!0,minlength:8,maxlength:12,passeguro:!0,equalTo:"#new"}},messages:{old:{required:"Ingrese clave actual",minlength:"Mínimo 5 caracteres",maxlength:"Mínimo 12 caracteres"},new:{required:"Ingresa clave nueva",minlength:"Mínimo 8 caracteres",maxlength:"Mínimo 12 caracteres"},again:{required:"Clave nueva otra vez",minlength:"Mínimo 8 caracteres",maxlength:"Máximo 12 caracteres",equalTo:"Claves no son iguales"}},errorPlacement:function(e,a){"old"==a.attr("name")&&e.appendTo("#oldError"),"new"==a.attr("name")&&e.appendTo("#newError"),"again"==a.attr("name")&&e.appendTo("#againError")},submitHandler:function(e){$.ajax({type:"post",url:"security.php",data:$(e).serialize(),success:function(e){e=JSON.parse(e);document.getElementById("actualizarclave").reset(),$("#subbtn").prop("disabled",!0),$("#old").attr("type","password"),$("#new").attr("type","password"),$("#again").attr("type","password"),1==e[0]?Toast.fire({icon:"success",title:"Contraseña cambiada"}):Toast.fire({icon:"error",title:e[1]})},error:function(){Toast.fire({icon:"error",title:"No se pudo cambiar la contraseña"})}})}})});const Toast=Swal.mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!1,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});